<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*
			{
				font-size:14px;
				line-height:1.5;
				overflow-x:hidden;
			}

			body
			{
				background:#222;
				color:#fff;
			}

			.log
			{
				background:#333;
				margin:16px;
				padding:16px;
			}

			.time
			{
				margin:4px 12px;
				color:#ccc;
			}

			.title
			{
				margin:8px;
				color:#fff;
				font-size:32px;
			}

			.tags
			{
				margin:8px;
			}

			.tag
			{
				margin:4px;
				padding:4px;
				background:#555;
				cursor:pointer;
				font-size:10px;
				border-radius:2px;
			}

			.text
			{
				margin:12px 32px 12px 32px;
			}

			.balloony
			{
				padding:2px;
				background:#624;
				border:1px solid #936;
				border-radius:2px;
			}

			#balloonD
			{
				position:absolute;
			}

			#balloon
			{
				background:#222;
				opacity:0;
				padding:0px 4px;
				border-radius:2px;
				white-space:nowrap;
			}

			#cat
			{
				position:fixed;
				left:-20px;
				bottom:-20px;
				width:120px;
				height:120px;
				border-radius:50%;
				transform:rotate(-10deg);
			}
		</style>
	</head>
	<body>
		<div id="logs"></div>
		<div id="balloonD"><div id="balloon"></div></div>
		<a href="https://twitter.com/FMS_Cat" target="_blank"><image src="cat.gif" id="cat"></image></a>
		<script src="jquery.js"></script>
		<script src="jquery.easing.js"></script>
		<script>
			$(function(){
				$.getJSON('logs.json',function(logs){
					logs.sort(function(a,b){
						return b.time - a.time;
					});
					$.each(logs,function(i,log){
						var logDiv = $('<div class="log">');
						$(logDiv).append('<div class="time">'+new Date(log.time)+'</div>');
						$(logDiv).append('<div class="title">'+log.title+'</div>');
						var tagsDiv = $('<div class="tags"></div>');
						$.each(log.tags,function(i,tag){
							$(tagsDiv).append('<span class="tag">'+tag+'</span>');
						});
						$(logDiv).append(tagsDiv);
						$.get('log/'+log.time+'.html',function(html){
							$(logDiv).append($('<div class="text">').html(html));
							addEvent();
						});
						$('#logs').append(logDiv);

						$(document).on('mousemove.moveBalloon',function(e){
							$("#balloonD").animate({left:e.clientX+8},0);
							$("#balloonD").animate({top:e.clientY+8},0);
						});

						$('#cat').on('mouseenter.zoomCat',function(e){
							$('#cat').attr('src','catAni.gif');
							$('#cat').stop();
							$('#cat').animate({width:180,height:180,left:-30,bottom:-30},200,'easeOutCubic');
						});

						$('#cat').on('mouseleave.unzoomCat',function(e){
							$('#cat').attr('src','cat.gif');
							$('#cat').stop();
							$('#cat').animate({width:120,height:120,left:-20,bottom:-20},200,'easeOutCubic');
						});
					});

					function addEvent(){
						$(".tag").on('click.tagSelect',function(e){
							console.log($(this).html());
						});

						$(".tag").on('mouseenter.tagBgOn',function(e){
							$(this).css({background:"#666"});
						});

						$(".tag").on('mouseleave.tagBgOff',function(e){
							$(this).css({background:"#555"});
						});

						$('[balloon]').on('mouseenter.showBalloon',function(e){
							$('#balloon').html($(this).attr('balloon'));
							$('#balloon').stop();
							$('#balloon').fadeTo(100,.8);
						});

						$('[balloon]').on('mouseleave.hideBalloon',function(e){
							$('#balloon').stop();
							$('#balloon').fadeTo(100,0);
						});
					}
					addEvent();
				});
			});
		</script>
	</body>
</html>
